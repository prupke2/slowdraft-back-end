(this["webpackJsonpslowdraft-front-end"]=this["webpackJsonpslowdraft-front-end"]||[]).push([[0],{30:function(e,t){e.exports="data:image/gif;base64,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"},35:function(e,t,a){e.exports=a(97)},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},72:function(e,t){},94:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(28),r=a.n(o),c=(a(40),a(1));a(41);a(42);function s(e){var t=e.code,a=e.setLoggedIn,o=e.setPub,r=e.setSub,c=e.setIsLoading;return Object(n.useEffect)((function(){console.log("in Login useEffect"),"undefined"!==typeof t&&(console.log("Code is "+t+", setting loading to true"),c(!0),c(!0),console.log("fetching /login/code"),fetch("/login/".concat(t)).then((function(e){return e.json()})).then((function(e){window.history.replaceState({},document.title,"/"),e.access_token&&e.refresh_token?(console.log("setting loggedIn to true"),o(e.pub),r(e.sub),a(!0)):a(!1)})).then(c(!1)))})),l.a.createElement("div",{className:"App"},l.a.createElement("div",{className:"login-container"},l.a.createElement("h1",null,"Slow",l.a.createElement("span",null,"Draft")),l.a.createElement("p",null,"Fantasy hockey drafting at your own pace"),l.a.createElement("p",null,"Currently by invitation only"),!1,l.a.createElement("div",{className:"connect-to-yahoo"},l.a.createElement("a",{href:"https://api.login.yahoo.com/oauth2/request_auth?client_id=dj0yJmk9ZXVsUnFtMm9hSlRqJmQ9WVdrOU1rOU5jWGQzTkhNbWNHbzlNQS0tJnM9Y29uc3VtZXJzZWNyZXQmc3Y9MCZ4PWQ1&redirect_uri=https://slowdraft.herokuapp.com&response_type=code&language=en-us"},"Sign in with \xa0",l.a.createElement("img",{alt:"Yahoo",src:"yahoo.png",width:"57",height:"16"})))))}var u=a(29),i=a.n(u),m=a(2);a(46);function A(){fetch("/get_league").then((function(e){return e.json()})).then((function(e){return console.log("test data: "+JSON.stringify(e,null,4)),"Got 'em"}))}function g(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{onClick:A},"test"))}var d=a(30),p=a.n(d);a(47);function f(e){return l.a.createElement("div",{className:"loading-wrapper"},l.a.createElement("div",{className:"loading-text"},e.text),l.a.createElement("img",{src:p.a,alt:""}))}var E=a(13),h=(a(33),a(31)),b=a.n(h),v=a(7),y=a(34);a(94);function C(e){var t=e.columns,a=e.data,n=e.defaultColumnFilter,o=e.tableState,r=l.a.useMemo((function(){return{fuzzyText:c,text:function(e,t,a){return e.filter((function(e){var n=e.values[t];return void 0===n||String(n).toLowerCase().startsWith(String(a).toLowerCase())}))}}}),[]);function c(e,t,a){return Object(y.a)(e,a,{keys:[function(e){return e.values[t]}]})}o=Object(E.a)(Object(E.a)({},o),{},{pageIndex:0,pageSize:10});var s=Object(v.useTable)({columns:t,data:a,defaultColumnFilter:n,filterTypes:r,initialState:o},v.useFilters,v.useSortBy,v.usePagination),u=s.getTableProps,i=s.getTableBodyProps,m=s.headerGroups,A=s.prepareRow,g=s.page,d=s.canPreviousPage,p=s.canNextPage,f=s.pageOptions,h=s.pageCount,C=s.gotoPage,j=s.nextPage,S=s.previousPage,k=s.state.pageIndex;return l.a.createElement("div",null,l.a.createElement("table",Object.assign({className:"table"},u()),l.a.createElement("thead",null,m.map((function(e){return l.a.createElement("tr",e.getHeaderGroupProps(),e.headers.map((function(e){return l.a.createElement("th",null,l.a.createElement("span",e.getHeaderProps(e.getSortByToggleProps()),e.render("Header"),l.a.createElement("span",null,e.isSorted?e.isSortedDesc?" \u25bc":" \u25b2":"")),l.a.createElement("div",null,e.canFilter?e.render("Filter"):null))})))}))),l.a.createElement("tbody",i(),g.map((function(e,t){return A(e),l.a.createElement("tr",e.getRowProps(),e.cells.map((function(e){return"Position"===e.column.Header?l.a.createElement("td",Object.assign({className:e.column.Header},e.getCellProps()),e.render((function(e){var t=e.value;return String(t+",").substring(0,String(t).length)}))):"Name"===e.column.Header?l.a.createElement("td",Object.assign({className:"player-name"},e.getCellProps()),l.a.createElement("a",{href:"https://sports.yahoo.com/nhl/players/".concat(e.row.original.player_id),target:"_blank",rel:"noopener noreferrer"},e.render("Cell"))):"Post Title"===e.column.Header?l.a.createElement("td",Object.assign({width:"50vw",className:"post-title",onClick:function(){return t=e.row.id,void document.getElementById("body-"+t).classList.toggle("hidden");var t}},e.getCellProps()),l.a.createElement("strong",null,e.render("Cell")," a"),l.a.createElement("div",{id:"body-".concat(e.row.id),className:"hidden"},b()(e.row.original.body))):l.a.createElement("td",Object.assign({className:e.column.Header},e.getCellProps()),e.render("Cell"))})))})))),l.a.createElement("ul",{className:"pagination"},l.a.createElement("li",{className:"pagination-arrows"},l.a.createElement("div",{className:"page-item",onClick:function(){return C(0)},disabled:!d},l.a.createElement("span",{className:"page-link"},"First")),l.a.createElement("div",{className:"page-item",onClick:function(){return S()},disabled:!d},l.a.createElement("span",{className:"page-link"},"<")),l.a.createElement("div",{className:"page-item",onClick:function(){return j()},disabled:!p},l.a.createElement("span",{className:"page-link"},">")),l.a.createElement("div",{className:"page-item",onClick:function(){return C(h-1)},disabled:!p},l.a.createElement("span",{className:"page-link"},"Last"))),l.a.createElement("li",{className:"pagination-goto-page"},l.a.createElement("span",{className:"page-link"},"Page\xa0",l.a.createElement("div",{className:"page-of-page"},l.a.createElement("strong",null,k+1," of ",f.length)," ")),l.a.createElement("span",{className:"page-link"},l.a.createElement("div",null,"Go\xa0to:"),l.a.createElement("input",{type:"number",defaultValue:k+1,onChange:function(e){var t=e.target.value?Number(e.target.value)-1:0;C(t)},style:{width:"40px",height:"22px"}})))," "))}function j(e){var t=e.column,a=t.filterValue,n=t.setFilter,o=t.id;return l.a.createElement("input",{className:"search-filter",id:"".concat(o,"-search-filter"),value:a||"",onChange:function(e){n(""!==e.target.value?e.target.value:void 0)},placeholder:"Filter..."})}function S(){var e={"":""},t=[{Header:"Name",accessor:"name",Filter:j},{Header:"Team",accessor:"team",Filter:j},{Header:"Player ID",accessor:"player_id",hidden:!0},{Header:"Position",accessor:"position.position",Filter:j}],a=Object(n.useState)([e]),o=Object(c.a)(a,2),r=o[0],s=o[1],u=Object(n.useState)(!0),i=Object(c.a)(u,2),m=i[0],A=i[1];return Object(n.useEffect)((function(){A(!0),fetch("/get_players").then((function(e){return e.json()})).then((function(e){s(e.players)})).then(A(!1))}),[]),m?l.a.createElement(f,{text:"Loading your team..."}):m?void 0:l.a.createElement(l.a.Fragment,null,r!==e&&l.a.createElement(C,{data:r,columns:t,tableState:{pageIndex:1,pageSize:10,pageCount:1e4,canNextPage:!0,canPreviousPage:!0,hiddenColumns:["player_id"]},defaultColumn:"player_id"}))}function k(){var e=Object(n.useState)([{"":""}]),t=Object(c.a)(e,2),a=t[0],o=t[1],r=[{Header:"Post Title",accessor:"title",Filter:j},{Header:"User",accessor:"user",Filter:j},{Header:"Body",accessor:"body",show:!1},{Header:"Date Posted",accessor:"create_date",Filter:j}],s=Object(n.useState)(!0),u=Object(c.a)(s,2),i=(u[0],u[1]);return Object(n.useEffect)((function(){i(!0),fetch("/get_forum_posts").then((function(e){return e.json()})).then((function(e){console.log("data: "+JSON.stringify(e.posts,null,4)),o(e.posts)})).then(i(!1))}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement(C,{data:a,columns:r,tableState:{hiddenColumns:["body"]},defaultColumn:"create_date"}))}function w(e){var t=e.logout;return l.a.createElement(l.a.Fragment,null,l.a.createElement(m.d,{defaultIndex:1,className:"navbar-tabs"},l.a.createElement(m.b,null,l.a.createElement(m.a,null,"Players"),l.a.createElement(m.a,null,"Team"),l.a.createElement(m.a,null,"Forum")),l.a.createElement(m.c,null,l.a.createElement(g,null)),l.a.createElement(m.c,null,l.a.createElement(S,null)),l.a.createElement(m.c,null,l.a.createElement(k,null))),l.a.createElement("button",{id:"logout",onClick:t},"Logout"))}var O=a(12),Z=a.n(O);function x(e){return l.a.createElement("ul",{id:"chat-messages"},l.a.createElement("li",null,l.a.createElement("div",null,e.messages.map((function(e,t){return l.a.createElement("div",{key:t},l.a.createElement("span",{className:"user"},e.uuid,": "),l.a.createElement("span",{className:"message"},e.text))})))))}a(95);function L(e){var t=e.pub,a=e.sub;console.log("pub: "+t+", sub: "+a);var o=Object(n.useState)([]),r=Object(c.a)(o,2),s=r[0],u=r[1],i=function(){var e=Object(n.useState)(""),t=Object(c.a)(e,2),a=t[0],l=t[1];return{value:a,setValue:l,onChange:function(e){l(e.target.value)}}}(),m=Object(n.useState)(["anon",(new Date).getTime()].join("-")),A=Object(c.a)(m,2),g=A[0];A[1];return Object(n.useEffect)((function(){console.log("setting up chat");var e=new Z.a({publishKey:t,subscribeKey:a,uuid:g});return e.addListener({status:function(e){"PNConnectedCategory"===e.category&&console.log("Connected to chat!")},message:function(e){if(e.message.text){console.log(e.message.text);var t=[];t.push({uuid:e.message.uuid,text:e.message.text}),u((function(e){return e.concat(t)}))}}}),e.subscribe({channels:["Global2"]}),e.history({channel:"Global2",count:10,stringifiedTimeToken:!0},(function(e,t){for(var a=[],n=0;n<t.messages.length;n++)a.push({uuid:t.messages[n].entry.uuid,text:t.messages[n].entry.text});u((function(e){return e.concat(a)}))})),function(){console.log("closing chat"),e.unsubscribeAll(),u([])}}),["Global2",g,t,a]),l.a.createElement(l.a.Fragment,null,""!==t&&""!==a&&l.a.createElement("aside",{id:"chatbox"},l.a.createElement("h3",{id:"chat-title"},"League Chat"),l.a.createElement(x,{messages:s}),l.a.createElement("input",{placeholder:"Enter a message...",id:"messageInput",value:i.value,onChange:i.onChange,onKeyDown:function(e){"messageInput"===e.target.id&&"Enter"===e.key&&function(){if(i.value){var e={text:i.value,uuid:g};new Z.a({publishKey:t,subscribeKey:a,uuid:g}).publish({message:e,channel:"Global2"}),i.setValue("")}}()}})))}function N(e){var t=e.logout,a=e.pub,n=e.sub,o=e.setLoadingText;return l.a.createElement(l.a.Fragment,null,l.a.createElement(w,{logout:t}),l.a.createElement(L,{pub:a,sub:n,setLoadingText:o}))}a(96);function I(){var e=Object(n.useState)(!1),t=Object(c.a)(e,2),a=t[0],o=t[1],r=Object(n.useState)(""),u=Object(c.a)(r,2),m=u[0],A=u[1],g=Object(n.useState)(""),d=Object(c.a)(g,2),p=d[0],E=d[1],h=Object(n.useState)(""),b=Object(c.a)(h,2),v=b[0],y=b[1],C=Object(n.useState)("Loading..."),j=Object(c.a)(C,2),S=j[0],k=j[1],w=Object(n.useState)(!0),O=Object(c.a)(w,2),Z=O[0],x=O[1],L=i.a.parse(window.location.search).code;return console.log("loggedIn: "+a),Object(n.useEffect)((function(){if(console.log("In App useEffect"),"undefined"===typeof L)try{console.log("fetching check_login"),fetch("/check_login").then((function(e){return e.json()})).then((function(e){!0===e.success?(A(e.pub),E(e.sub),window.history.replaceState({},document.title,"/"),o(!0)):o(!1),console.log("setting isLoading to false"),x(!1)}))}catch(v){console.log("Error in App useEffect"),y("Unable to reach Yahoo. "+v),x(!1)}else x(!1)}),[L]),l.a.createElement("main",null,v&&l.a.createElement("div",null,v),Z&&l.a.createElement(f,{text:S}),!Z&&!a&&l.a.createElement(s,{code:L,setLoggedIn:o,setPub:A,setSub:E,setIsLoading:x,setLoadingText:k}),a&&l.a.createElement(N,{logout:function(){fetch("/logout").then((function(e){return e.json()})).then((function(e){console.log("Logging out: "+e.success),o(!1),x(!1),k("Loading...")}))},pub:m,sub:p,setLoadingText:k}))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[35,1,2]]]);
//# sourceMappingURL=main.633261a9.chunk.js.map