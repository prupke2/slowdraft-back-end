(this["webpackJsonpslowdraft-front-end"]=this["webpackJsonpslowdraft-front-end"]||[]).push([[0],[,,,,,,,,,function(e,t,n){e.exports=n(26)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,function(e,t,n){},,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(6),r=n.n(c),l=(n(14),n(1));n(15);n(16);function u(e){var t=e.code,n=e.login;return t&&fetch("/login/".concat(t),{method:"GET"}).then((function(e){return e.json()})).then((function(e){e.access_token&&e.refresh_token?(window.history.replaceState({},document.title,"/"),n(!0)):n(!1)})),o.a.createElement("div",{className:"App"},o.a.createElement("div",{className:"login-container"},o.a.createElement("h1",null,"Slow",o.a.createElement("span",null,"Draft")),o.a.createElement("p",null,"Fantasy hockey drafting at your own pace"),o.a.createElement("p",null,"Currently by invitation only"),!1,o.a.createElement("div",{className:"connect-to-yahoo"},o.a.createElement("a",{href:"https://api.login.yahoo.com/oauth2/request_auth?client_id=dj0yJmk9ZnBhT05mU3JBYnJDJmQ9WVdrOWJrWjBXRlpSYlVNbWNHbzlNQT09JnM9Y29uc3VtZXJzZWNyZXQmc3Y9MCZ4PTAz&redirect_uri=https://slowdraft.herokuapp.com&response_type=code&language=en-us"},"Sign in with \xa0",o.a.createElement("img",{alt:"Yahoo",src:"yahoo.png",width:"57",height:"16"})))))}var s=n(7),i=n.n(s),m=function(e){return e.children},d=n(2),h=(n(20),n(8));n(24);function f(){var e=o.a.useMemo((function(){return[{player:"Crosby",stat:"10"},{player:"Ovechkin",stat:"7"},{player:"Kane",stat:"4"}]}),[]),t=o.a.useMemo((function(){return[{Header:"Players",accessor:"player"},{Header:"Stats",accessor:"stat"}]}),[]),n=Object(h.useTable)({columns:t,data:e}),a=n.getTableProps,c=n.getTableBodyProps,r=n.headerGroups,l=n.rows,u=n.prepareRow;return o.a.createElement("table",a(),o.a.createElement("thead",null,r.map((function(e){return o.a.createElement("tr",e.getHeaderGroupProps(),e.headers.map((function(e){return o.a.createElement("th",e.getHeaderProps(),e.render("Header"))})))}))),o.a.createElement("tbody",c(),l.map((function(e){return u(e),o.a.createElement("tr",e.getRowProps(),e.cells.map((function(e){return o.a.createElement("td",e.getCellProps(),e.render("Cell"))})))}))))}function g(){var e=Object(a.useState)(),t=Object(l.a)(e,2),n=t[0],c=t[1];return o.a.createElement(m,null,o.a.createElement(d.d,{defaultIndex:0,className:"navbar-tabs"},o.a.createElement(d.b,null,o.a.createElement(d.a,null,"1"),o.a.createElement(d.a,null,"2"),o.a.createElement(d.a,null,"3")),o.a.createElement(d.c,null,o.a.createElement("h2",null,"tab 1 content"),o.a.createElement("button",{onClick:function(){fetch("/test").then((function(e){return e.json()})).then((function(e){c(e.test)}))}},"test"),"Test: ",n),o.a.createElement(d.c,null,o.a.createElement("h2",null,"tab 2 content"),o.a.createElement(f,null)),o.a.createElement(d.c,null,o.a.createElement("h2",null,"tab 3 content"))))}var p=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],o=t[1];return{value:n,setValue:o,onChange:function(e){o(e.target.value)}}},b=n(5),E=n.n(b);function w(e){for(var t=e.logout,n=e.pub,c=e.sub,r=Object(a.useState)([]),u=Object(l.a)(r,2),s=u[0],i=u[1],m=p(),d=p(),h="Global",f=Object(a.useState)(h),b=Object(l.a)(f,2),w=b[0],v=b[1],y=Object(a.useState)(["user",(new Date).getTime()].join("-")),j=Object(l.a)(y,1)[0],O=window.location.search.substring(1).split("&"),k=0;k<O.length;k++){var S=O[k].split("=");"channel"===S[0]&&""!==S[1]&&(h=decodeURI(S[1]))}function C(){var e=window.location.search.substring(1);if(e)for(var t=e.split("&"),n=0;n<t.length;n++){var a=t[n].split("=");"channel"===a[0]&&""!==a[1]&&v(decodeURI(a[1]))}else v("Global")}function x(e){return o.a.createElement("ul",{id:"chat-messages"},o.a.createElement("li",null,o.a.createElement("div",null,e.messages.map((function(e,t){return o.a.createElement("div",{key:t},o.a.createElement("span",{className:"user"},e.uuid,": "),o.a.createElement("span",{className:"message"},e.text))})))))}return Object(a.useEffect)((function(){return window.addEventListener("popstate",C),function(){window.removeEventListener("popstate",C)}}),[]),Object(a.useEffect)((function(){console.log("setting up chat");var e=new E.a({publishKey:n,subscribeKey:c,uuid:j});return e.addListener({status:function(e){"PNConnectedCategory"===e.category&&console.log("Connected to chat!")},message:function(e){if(e.message.text){console.log(e.message.text);var t=[];t.push({uuid:e.message.uuid,text:e.message.text}),i((function(e){return e.concat(t)}))}}}),e.subscribe({channels:[w]}),e.history({channel:w,count:10,stringifiedTimeToken:!0},(function(e,t){for(var n=[],a=0;a<t.messages.length;a++)n.push({uuid:t.messages[a].entry.uuid,text:t.messages[a].entry.text});i((function(e){return e.concat(n)}))})),function(){console.log("closing chat"),e.unsubscribeAll(),i([])}}),[w,j,n,c]),o.a.createElement(o.a.Fragment,null,o.a.createElement(g,null),o.a.createElement("button",{class:"button",id:"logout",onClick:t},"Logout"),o.a.createElement("div",{id:"chatbox"},o.a.createElement(x,{messages:s}),o.a.createElement("input",{placeholder:"Enter a message",id:"messageInput",value:d.value,onChange:d.onChange,onKeyDown:function(e){if("messageInput"===e.target.id)"Enter"===e.key&&function(){if(d.value){var e={text:d.value,uuid:j};new E.a({publishKey:n,subscribeKey:c,uuid:j}).publish({message:e,channel:w}),d.setValue("")}}();else if("channelInput"===e.target.id&&"Enter"===e.key){var t=m.value.trim();if(t){if(w!==t){v(t);var a=window.location.origin+"?channel="+t;window.history.pushState(null,"",a),m.setValue("")}}else if("Global"!==w){v("Global");var o=window.location.origin;window.history.pushState(null,"",o),m.setValue("")}}},autoFocus:!0})))}n(25);function v(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),s=Object(l.a)(r,2),d=s[0],h=s[1],f=Object(a.useState)(""),g=Object(l.a)(f,2),p=g[0],b=g[1],E=i.a.parse(window.location.search).code;return Object(a.useEffect)((function(){fetch("/check_login").then((function(e){return e.json()})).then((function(e){!0===e.success?(h(e.pub),b(e.sub),window.history.replaceState({},document.title,"/"),c(!0)):c(!1)}))}),[]),o.a.createElement(m,null,!n&&o.a.createElement(u,{code:E,login:c}),n&&""!==d&&o.a.createElement(w,{logout:function(){fetch("/logout").then((function(e){return e.json()})).then((function(e){console.log(e.success),c(!1)}))},pub:d,sub:p}))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(v,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[9,1,2]]]);
//# sourceMappingURL=main.35710b9f.chunk.js.map